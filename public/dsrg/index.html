
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>DSRG</title>
  <meta name="author" content="PDOS">

  
  <meta name="description" content="What is Spanner? Spanner is a highly distributed, externally consistent database
developed by Google. It provides replication and transactions over a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pdos.csail.mit.edu/dsrg">
  <link href="/dsrg/favicon.png" rel="icon">
  <link href="/dsrg/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/dsrg/atom.xml" rel="alternate" title="DSRG" type="application/atom+xml">
  <script src="/dsrg/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/dsrg/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/dsrg/">DSRG</a></h1>
  
    <h2>Distributed systems reading group at MIT</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/dsrg/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:pdos.csail.mit.edu/dsrg" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/dsrg/">Blog</a></li>
  <li><a href="/dsrg/schedule">Schedule</a></li>
  <li><a href="/dsrg/papers">Papers</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/dsrg/blog/2013/05/30/spanner/">Spanner</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-30T18:05:00-04:00" pubdate data-updated="true">May 30<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>What is Spanner?</h2>

<p>Spanner is a highly distributed, externally consistent database
developed by Google.  It provides replication and transactions over a
geographically distributed set of servers.  Spanner uses time bounds,
Paxos, and two-phase commit.</p>

<h2>Interesting Ideas</h2>

<p>Spanner shows the power of the TrueTime API (TT). A call to TT.now() provides a
range of time to an application.  The actual time is guaranteed to lie
somewhere within that range. This simple idea allows for some nice properties.</p>

<p>Read locks can be avoided. Spanner has two kind of reads, essentially a
&lsquo;current value read&rsquo; which it calls a read-only transaction, and a snapshot
read which is a read in the past. The two read types are closely related. In
both cases the read can be performed at any replica that is sufficiently up to
date (spanner replicas keep a variable called <code>t<sub>safe</sub></code>
that is known to have passed and therefore all writes prior have been
included). The difference is that since snapshot read incudes some notion of
staleness, it should succeed at more replicas (i.e. more replicas should be
sufficiently up to date).</p>

<p>Paxos leader leases can be maintained. The Paxos leader maintain lease votes
and when it has a quorum, knows it has a valid lease. TT allows these leases to
remain disjoint without requiring additional Paxos logging.</p>

<p>Schema changes can be performed atomically without blocking. Spanner picks a
future time for the change to occur. Since operations have a bounded error on
the real time, each replica knows if the operation is safe to perform (it
either occurs wholly before or after the schema change or it blocks until the
schema change time has passed).</p>

<!-- Spanner uses clocks with bounded uncertainty to provide synchrony between
servers. It also shards an application's data to provide fine-grained load
distribution. Transactions are also provided to applications in order to deal
with independently managed shards.  -->


<h2>Subtleties</h2>

<p>TrueTime guarantees one thing: that the &ldquo;absolute&rdquo; time is within the interval.
Since Spanner commits only when <code>TT.now.after(timestamp)</code> is true,
we are guaranteed that from now on <code>TT.now.latest()</code> will always be
larger than the commited timestamp on all servers.</p>

<h2>Questions</h2>

<ul>
<li><p><strong>Why is the write throughput so low?</strong>  4K ops/sec for one server not
running Paxos and not waiting for anyother commit times seems very low.</p></li>
<li><p><strong>Why is the throughput experiment CPU bound?</strong></p></li>
<li><p><strong>How far appart do the servers need to be for TT to be &lsquo;worth it&rsquo;</strong> Would it
make sense for servers in the same rack? data center? city?</p></li>
</ul>


<p><a href="http://pdos.csail.mit.edu/6.824/notes/l07.txt">6.824 notes</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/dsrg/blog/2013/05/23/raft/">Raft</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-23T18:00:00-04:00" pubdate data-updated="true">May 23<span>rd</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Disclaimer:  This paper is still under submission.</p>

<h2>What is Raft and why was it written and why did we read it?</h2>

<p>Raft is a new consensus algorithm that is optimized for “ease of
implementation”.  Its main purpose is to present a protocol that is
more understandable than Paxos, which, for many practitioners, is
difficult to implement correctly.  Viewstamped Replication is more
similar to Raft, however it is far less popular than Paxos, so it is
unfortunately not focused on in the paper.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/dsrg/blog/2013/05/23/raft/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
    <a href="/dsrg/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/dsrg/blog/2013/05/30/spanner/">Spanner</a>
      </li>
    
      <li class="post">
        <a href="/dsrg/blog/2013/05/23/raft/">Raft</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - PDOS -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dsrg';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
